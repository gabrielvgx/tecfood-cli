version: "3"
services:
  app:
    image: gvgx/cordova-app-tecfood:latest
    container_name: app-container
    build: ./build/app
    working_dir: /var/www
    restart: always
    tty: true
    volumes:
      - /home/gabrielvgx/workfolder:/var/www
    networks:
      - dev_network
  birt:
    image: dockerhub.teknisa.com/birt:latest
    container_name: birt
    environment:
      - http_proxy=http://192.168.122.121:3128
      - https_proxy=http://192.168.122.121:3128
    volumes:
      - /home/gabrielvgx/workfolder:/var/www
    ports:
      - "9191:9191"
      - "8080:8080"
    networks:
      - dev_network
    restart: always
  basedev:
    image: dockerhub.teknisa.com/c9-php7:latest
    container_name: basedev-container
    volumes:
      - /u01:/u01
      - /home/gabrielvgx/workfolder:/home/developer/workfolder
      - /home/gabrielvgx/.ssh:/root/.ssh
    ports:
      - "3000:80"
    networks:
      - dev_network
    restart: always
  mongo:
    image: mongo:3.2
    container_name: mongo-container
    ports:
      - "27017:27017"
    networks:
      - dev_network
  algoritmo:
    image: node:10
    container_name: algoritmo-container
    user: "node"
    working_dir: /home/node/app
    environment:
      - NODE_ENV=production
      - TZ=America/Sao_Paulo
    volumes:
      - /home/gabrielvgx/workfolder/algoritmo:/home/node/app
    ports:
      - "9521:9191"
    networks:
      - dev_network
    restart: always
    command: "node --max-old-space-size=10000 server.js"
networks:
  dev_network:
    name: dev_network
    driver: bridge